

以下為根據您的需求生成的產品需求文檔 (PRD)：

## PRD：UNO 遊戲介面優化與多張牌出牌功能

### 1. 功能名稱
出牌狀態顯示優化與多張同數牌選擇機制

### 2. 為什麼要加
*   **提升資訊可見性**：原版遊戲中，當棄牌堆頂顯示萬能牌時，玩家難以直觀看出當前應該出的顏色（依賴記憶或細小文字）。顯式化顏色與數字資訊可大幅降低認知負擔。
*   **增強遊戲體驗與效率**：原版僅能一張一張出牌，操作繁瑣且未能符合常見 UNO 規則（如手中有三張不同顏色的 7 應可一次打出）。新增多選功能可加快遊戲節奏，並增加「堆疊功能牌」的策略深度。

### 3. 具體要求

#### 3.1 狀態顯示優化
*   **新增介面元素**：在遊戲主畫面中央上方，電腦手牌與玩家手牌之間，新增「目前出牌狀態」資訊欄。
*   **顏色指示**：
    *   以圓形色塊圖示顯示當前有效顏色。
    *   邏輯：若棄牌堆頂為普通牌，顯示該牌顏色；若為萬能牌，顯示玩家選擇的指定顏色。
*   **數值/功能指示**：
    *   以文字顯示當前需要匹配的數字或功能（如 "7", "Skip", "+2"）。
    *   若為萬能牌，顯示 "WILD"。

#### 3.2 多張牌選擇機制
*   **選擇互動**：
    *   玩家點擊手牌時，卡片不立即打出，而是切換為「選中狀態」。
    *   **視覺反饋**：被選中的卡片需向上浮起並發出金框光暈，與未選中的卡片有明顯區分。
    *   再次點擊已選中的卡片可取消選擇。
*   **選擇規則限制**：
    *   **同數值原則**：玩家只能同時選擇數值（Value）相同的卡片。
    *   **異顏色原則**：選中的多張卡片之間，顏色必須互不相同（例如：紅7、藍7、黃7 可同選；紅7、紅7 不可同選）。
    *   **萬能牌限制**：萬能牌 不能與其他卡片同時選擇出牌。
*   **出牌流程**：
    *   當至少有一張牌被選中時，介面上顯示「出牌」確認按鈕。
    *   點擊「出牌」按鈕後，系統驗證選中的牌組是否符合當前棄牌規則（顏色或數值匹配）。
    *   若符合規則，將所有選中的牌移入棄牌堆，並觸發對應效果（若多張功能牌疊加，效果疊加計算，如兩張 +2 為對方抽 4 張）。

### 4. 現有代碼 (實作摘要)

*   **HTML 結構調整**：
    *   新增 `<div id="game-info">` 區塊，包含 `.color-indicator` (顏色圓點) 和 `#status-value` (數值文字)。
    *   新增 `<button id="play-cards-btn">` 用於確認多選出牌。
    *   新增 `<button id="pass-turn">` 用於抽牌後跳過回合。

*   **CSS 樣式更新**：
    *   新增 `.card.selected` 類別，定義選中卡片樣式（`transform: translateY(-20px)` 與 `border-color: #ffd700`）。
    *   調整佈局以適應新的資訊欄位。

*   **JavaScript 邏輯實作**：
    *   **狀態管理**：新增 `selectedCardIndices` (Set) 用於追蹤玩家選中的卡片索引。
    *   **選擇驗證 (`toggleCardSelection`)**：
        *   判斷點擊的卡片是否與已選中的第一張卡片數值相同。
        *   判斷顏色是否重複。
        *   阻止萬能牌的多選。
    *   **出牌邏輯 (`playCardsBtn` click handler)**：
        *   將索引轉為陣列並由大到小排序以安全從 `playerHand` 移除。
        *   若選中多張功能牌，計算總效果（如 `drawCount` 累加）。
        *   若為萬能牌，暫停流程並開啟顏色選擇器，顏色確定後再執行效果。

---
*此 PRD 描述了在前一個代碼回覆中所實現的功能細節。*